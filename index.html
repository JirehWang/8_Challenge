<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å…«æ ¼æŒ‘æˆ°é¡Œç›®ç”¢ç”Ÿå™¨</title>
    <style>
        :root { --primary: #ff4757; --bg: #2f3542; }
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background: var(--bg); color: white; display: flex; flex-direction: column; align-items: center; min-height: 100vh; margin: 0; padding: 20px; }
        
        .display-container {
            width: 300px; height: 300px; background: white; border-radius: 20px;
            display: flex; align-items: center; justify-content: center;
            box-shadow: 0 0 30px rgba(255, 71, 87, 0.4); margin: 30px 0;
            border: 8px solid var(--primary);
        }

        #target-text {
            color: #2f3542; font-size: 48px; font-weight: bold; text-align: center;
            padding: 20px; word-break: break-all;
        }

        .settings-panel {
            background: rgba(255, 255, 255, 0.1); padding: 20px; border-radius: 15px;
            width: 90%; max-width: 500px;
        }

        textarea { width: 100%; height: 100px; margin-top: 10px; border-radius: 5px; padding: 10px; box-sizing: border-box; }
        
        .control-group { margin: 15px 0; display: flex; align-items: center; gap: 10px; }
        
        .btn-group { display: flex; gap: 10px; justify-content: center; margin-top: 20px; }
        button {
            padding: 12px 30px; font-size: 18px; border: none; border-radius: 50px;
            cursor: pointer; transition: 0.3s; font-weight: bold;
        }
        #startBtn { background: #2ed573; color: white; }
        #stopBtn { background: #ff4757; color: white; }
        button:disabled { opacity: 0.5; cursor: not-allowed; }

        input[type="range"] { flex-grow: 1; }
    </style>
</head>
<body>

    <h1>ğŸ² å…«æ ¼æŒ‘æˆ°é¡Œç›®ç”¢ç”Ÿå™¨</h1>

    <div class="display-container">
        <div id="target-text">æº–å‚™å¥½äº†å—ï¼Ÿ</div>
    </div>

    <div class="settings-panel">
        <div>
            <label>ğŸ“ è‡ªè¨‚é¡Œç›® (æ¯è¡Œä¸€å€‹)ï¼š</label>
            <textarea id="topicInput">æœ€æ„›çš„é£Ÿç‰©
æƒ³å»çš„åœ°æ–¹
ç«¥å¹´å›æ†¶
è¨å­çš„è”¬èœ
æœ€è¿‘çš„èˆˆè¶£
ç¬¬ä¸€é–€èª²
å¤¢æƒ³è·æ¥­
æœ€æ„›çš„æ­Œ</textarea>
        </div>

        <div class="control-group">
            <label>âš¡ é€Ÿåº¦ (æ¯«ç§’)ï¼š</label>
            <input type="range" id="speedRange" min="50" max="1000" value="100">
            <span id="speedVal">100ms</span>
        </div>

        <div class="control-group">
            <label>ğŸµ éŸ³æ¨‚é€£çµï¼š</label>
            <input type="text" id="musicUrl" placeholder="è²¼ä¸Š MP3 ç¶²å€ (å¦‚: music.com/bgm.mp3)" style="flex-grow: 1; padding: 5px;">
        </div>

        <div class="btn-group">
            <button id="startBtn" onclick="startRolling()">é–‹å§‹æŠ½å–</button>
            <button id="stopBtn" onclick="stopRolling()" disabled>åœæ­¢</button>
        </div>
    </div>

    <audio id="bgm" loop></audio>

    <script>
        let timer = null;
        const targetText = document.getElementById('target-text');
        const startBtn = document.getElementById('startBtn');
        const stopBtn = document.getElementById('stopBtn');
        const audio = document.getElementById('bgm');

        // æ›´æ–°é€Ÿåº¦æ•¸å€¼é¡¯ç¤º
        document.getElementById('speedRange').oninput = function() {
            document.getElementById('speedVal').innerText = this.value + 'ms';
        };

        function startRolling() {
            const topics = document.getElementById('topicInput').value.trim().split('\n');
            const speed = document.getElementById('speedRange').value;
            const musicLink = document.getElementById('musicUrl').value;

            if (topics.length < 1) return alert('è«‹è¼¸å…¥é¡Œç›®ï¼');

            // éŸ³æ¨‚è™•ç†
            if (musicLink) {
                audio.src = musicLink;
                audio.play().catch(e => console.log("éŸ³æ¨‚æ’­æ”¾å—é™ï¼Œéœ€æ‰‹å‹•è§¸ç™¼"));
            }

            // æŒ‰éˆ•ç‹€æ…‹åˆ‡æ›
            startBtn.disabled = true;
            stopBtn.disabled = false;

            // é–‹å§‹è·³å‹•
            timer = setInterval(() => {
                const randomIdx = Math.floor(Math.random() * topics.length);
                targetText.innerText = topics[randomIdx];
            }, speed);
        }

        function stopRolling() {
            clearInterval(timer);
            startBtn.disabled = false;
            stopBtn.disabled = true;
            audio.pause(); // åœæ­¢æ™‚éœéŸ³
        }
    </script>
</body>
</html>
